#!/bin/bash

#SBATCH --job-name=fluAB_test
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=8
#SBATCH --partition=vm-cpu
#SBATCH --time=3-00:00:00
#SBATCH --mem=32G
#SBATCH -o slurm-%j.out
#SBATCH -e slurm-%j.err
#SBATCH --mail-user=xiaoli.dong@albertaprecisionlabs.ca
#SBATCH --mail-type=ALL

# ---------------------------------------------------------------------

# ACTIVATE conda
eval "$(conda shell.bash hook)"
conda activate

conda activate nf-core 
echo "Current working directory: `pwd`"
echo "Starting run at: `date`"
# ---------------------------------------------------------------------
nextflow run /nfs/Genomics_DEV/projects/xdong/deve/nf-fluAB/main.nf -profile singularity --input samplesheet.csv  --variant_caller freebayes --outdir results -c my.config --platform illumina  -resume
nextflow run /nfs/Genomics_DEV/projects/xdong/deve/nf-fluAB/main.nf -profile singularity --input samplesheet.csv --variant_caller bcftools --outdir results -c my.config --platform illumina  -resume
# ---------------------------------------------------------------------
echo "Job finished with exit code $? at: `date`"
conda deactivate 

# ---------------------------------------------------------------------
